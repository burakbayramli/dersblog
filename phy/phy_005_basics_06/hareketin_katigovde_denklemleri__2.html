<!DOCTYPE html>
<html>
  <head>
    <title>Hareketin Katı-Gövde Denklemleri - 2
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [["$","$"]]}
      });
    MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
        cancel: ["Extension","cancel"],
        bcancel: ["Extension","cancel"],
        xcancel: ["Extension","cancel"],
        cancelto: ["Extension","cancel"]
      });
    });
    </script>
   <script type="text/javascript"
       src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full">
   </script>
   <script async="async" data-cfasync="false" src="//pl22489825.profitablegatecpm.com/d84f574876e65b2d8f0c7bae784c22b3/invoke.js"></script>

<p><link rel="stylesheet" type="text/css" media="screen" href="https://burakbayramli.github.io/css/style.css">
  </head>
    <body>
      <div id="header_wrap" class="outer">
        <header class="inner">
          <h1 id="project_title">
            <a href="https://burakbayramli.github.io" style="text-decoration:none; color:inherit;">dersblog</a>
          </h1>
          <h2 id="project_tagline"></h2>        <br />
        </header>
      </div>
      <div id="main_content_wrap" class="outer">      <br />
        <section id="main_content" class="inner">
        <h1>Hareketin Katı-Gövde Denklemleri - 2
</h1></p>
<p>Daha önce rotasyon matrisi bazlı hareket denklemlerini vermiştik. Bu yazıda
cisim duruşu ve dönüş mekaniğini kuaterniyon kavramı üzerinden hesaplayacağız,
daha önce görülen bazı kavramların da tekrar üzerinden geçeceğiz.</p>
<p>Lineer Hız, Momentum</p>
<p>Cisim yeri ve hızı şöyle alakalı,</p>
<p>$$
\frac{\mathrm{d} x(t)}{\mathrm{d} t} = v(t)
$$</p>
<p>Katı gövdenin momentumu</p>
<p>$$
p(t) = m v(t)
$$</p>
<p>Newton'un ikinci kanununa gore,</p>
<p>$$
\frac{\mathrm{d} p(t)}{\mathrm{d} t} = F(t)
$$</p>
<p>Yani momentumun zamansal türevi kuvvettir. Hareket hesaplarında $F$ entegre
edilerek $p$ hesaplanır, $p$'yi $m$ ile bölerek $v$ elde ederiz, ve onu entegre
ederek cisim yeri $x$ elde edilir [1, sf. 466].</p>
<p>Açısal Momentum</p>
<p>Lineer momentum kavramı anlaşılması kolay, onu bir tür atalet olarak görüyoruz,
hareket eden bir objenin düz bir çizgi üzerindeki hareketini devam ettirmeye
olan meyili. Tabii ki bu meyil, hareketin devamlılığı o anki hız ve cismin
kütlesiyle orantılı, $mv$ buradan geliyor. Açısal momentum da benzer bir kavram,
tek fark bir eksen etrafında dönmekte olan bir cismin dönmeye devam etme meyili.
O zaman üç boyutta, orijin etrafındaki açısal momentum $\vec{L}$, $m$ kütleli
cismin orijine olan uzaklığı $\vec{r}$ ile $m\vec{v}$ çapraz çarpımıdır [1, sf. 42].</p>
<p>$$
L = r \times p = r \times mv
$$</p>
<p>Aynen kuvvetin momentumun zamansal türevi olması gibi, tork benzer şekilde
açısal momentumun türevidir, bunu görmek için üstteki $L$'nin türevini alalım,</p>
<p>$$
\frac{\mathrm{d} L}{\mathrm{d} t} = \frac{\mathrm{d} (r \times p)}{\mathrm{d} t}
$$</p>
<p>Eşitliğin sağındaki türev zincirleme kuralı ile şöyle açılır,</p>
<p>$$
= r \times \frac{\mathrm{d} p}{\mathrm{d} t} + \frac{\mathrm{d} r}{\mathrm{d} t} \times p
$$</p>
<p>$\mathrm{d} p / \mathrm{d} t = F$, $\mathrm{d} r / \mathrm{d} t = v$ olduğunu biliyoruz, üstte yerine
geçirelim,</p>
<p>$$
= r \times F + v \times p
$$</p>
<p>Fakat $v$ ile $p$ aynı yöne işaret eden vektörler, onların çapraz çarpımı sıfır,
geri kalanlar,</p>
<p>$$
\frac{\mathrm{d} L}{\mathrm{d} t} = r \times F = \tau
$$</p>
<p>Bir diğer eşitlik</p>
<p>$$
L(t) = J(t) w(t)
$$</p>
<p>Bu formül açısal momentum ile açısal hız $w$ (diğer kaynaklarda $\omega$) ile
ilişkilendirir, lineer momentum'daki kütle yerine burada $J$ (diğer kaynaklarda
$I$ diye geçer) var, ki $J$ bir atalet tensoru, objenin şekline, ağırlık
dağılımına göre değişir, ve bu değerin kendisi de obje döndükçe değişime uğrar.</p>
<p>Hesaplarda gereken uygulanan tork $\tau(t)$'un sebep olduğu cisim dönüşünü
bulmak, bunun için $\tau$ entegre edilerek $L$ elde edilir, $L$ değeri $J$ ile
bölünerek (daha doğrusu $J$ bir matris olduğu için onun tersi alıp çarpılarak)
$w$ elde edilir. Kuaterniyon durumunda</p>
<p>$$
\frac{\mathrm{d} q(t)}{\mathrm{d} t} = \frac{1}{2} \omega(t) q(t)
$$</p>
<p>entegre edilerek objenin dönüş sonrası yeni işaret ettiği yer bulunur (burada
$\omega$ açısal hızı temsil eden kuaterniyon). Üstteki denklemi türetmek
gerekirse [4, sf. 264] kaynağına başvurulabilir. Herhangi iki kuaterniyonun bir
geçiş kuaterniyonu ile birbirine bağlanabildiğini biliyoruz. O zaman ufak bir
zaman dilimi $\Delta t$ içinde $q(t)$ ve $q(t + \Delta t)$ kuaterniyonlarının
nasıl ilişkili olduğuna bakarız, yani aradığımız bir $\Delta r(t)$ öyle ki</p>
<p>$$
q(t + \Delta t) = q(t) \Delta r(t)
$$</p>
<p>olsun, ve</p>
<p>$$
\Delta r(t) = \cos (\Delta \alpha) + v(t) \sin(\theta \alpha)
$$</p>
<p>Üstteki formülü kuaterniyon tanımından [3] biliyoruz, dönüş açısı $2 \Delta
\alpha$, ve etrafında dönüşün yapıldığı eksen vektör $v(t)$.</p>
<p>Dönüş açısı $\Delta \alpha$ çok ufak, bu sebeple küçük açı yaklaşıklaması [5]
üzerinden $\cos(\Delta \alpha) \approx 1$, $\sin(\Delta \alpha) \approx \Delta
\alpha$, o zaman</p>
<p>$$
\Delta r(t) = 1 + v(t) (\Delta \alpha)
$$</p>
<p>Bu demektir ki</p>
<p>$$
q(t + \Delta t) = q(t) [1 + v(t) (\Delta \alpha)]
$$</p>
<p>$$
 = q(t)  + q(t) v(t) (\Delta \alpha)
$$</p>
<p>$$
\Rightarrow q(t + \Delta t) - q(t) = q(t) v(t) (\Delta \alpha)
$$</p>
<p>Şimdi her iki tarafı $\Delta t$ ile bölüp limit uygularsak,</p>
<p>$$
\frac{\mathrm{d} q}{\mathrm{d} t} = \lim_{\Delta t \to 0} \frac{q(t + \Delta t) - q(t)}{\Delta t}
$$</p>
<p>$$
= \lim_{\Delta t \to 0} \frac{q(t) v(t) (\Delta \alpha)}{\Delta t}
$$</p>
<p>Dikkat edersek skalar $\Delta \alpha$ değişimi $\Delta t$ ile bölünüyor, bu bize
skalar açısal değişim $\omega(t)$'yı verir. Bu açısal hızın vektör $v(t)$ ile
çarpılması ise $v(t)$ etrafındaki skalar açısal değişim $\vec{\omega}(t)$'yı
verir, yani</p>
<p>$$
= q(t) v(t) \omega(t) = q(t) \vec{\omega}(t)
$$</p>
<p>Son formül dönüş açısı $2 \Delta \alpha$ içindi, eğer $\Delta \alpha$
istiyorsak, formülü $1/2$ ile çarparız. Böylece </p>
<p>$$
\frac{\mathrm{d} q(t)}{\mathrm{d} t} = \frac{1}{2} \vec{\omega}(t) q(t)
$$</p>
<p>formülüne erişmiş olduk. $q(t)$ için gereken entegrasyon üstteki formül
üzerinden yapılır.</p>
<p>Not: Hesapsal hataların birikmemesi için $q(t)$'yi sürekli normalize etmek
iyi bir fikirdir, bu normalizasyon</p>
<p>$$
q(t) = \frac{\hat{q(t)}}{|\hat{q(t)}|}
$$</p>
<p>ile gerçekleştirilebilir [1, sf. 468].</p>
<p>Hepsini bir araya koyarsak entegrasyonun uygulanacağı nihai yapı şu şekilde
gösterilebilir,</p>
<p>$$
\frac{\mathrm{d}}{\mathrm{d} t}
\left[\begin{array}{c}
x \\ q \\ p  \\ L
\end{array}\right] =
\left[\begin{array}{c}
\dot{x} \\ \dot{q} \\ \dot{p}  \\ \dot{L}
\end{array}\right] =
\left[\begin{array}{ccc}
m^{-1} p \\ \omega q / 2 \\ F \\ \tau
\end{array}\right]
$$</p>
<p>Başlangıç Kuvvetleri</p>
<p>Şimdi "sıfırıncı anda" yani ilk başlangıçta uygulanan kuvvetleri, lineer,
açısal, hesaplamak lazım. Obje üzerinde uygulanan noktaya bildiğimizi
farzedelim, sonu o noktada başlangıcı nesne ağırlık merkezinde olan bir vektör
ile kuvvet vektörü arasında çapraz çarpım yapıyoruz, bu bize torku veriyor.</p>
<p><img alt="" src="phy_008_sim_rigbod_01.png" /></p>
<p>Benzer şekilde sonu nesne merkezinde başı o noktada olan bir vektör daha var,
lineer kuvvet bu doğrultuda uygulanacak, o vektör üzerine iki üstte görülen
kırmızı vektörü yansıtıyoruz, bu da lineer kuvvet oluyor. Bir üstteki resim
üzerinde gösterirsek,</p>
<p><img alt="" src="phy_008_sim_rigbod_02.png" /></p>
<p>Daha önce söylediğimiz gibi her iki kuvvet de ilk anda lineer ve açısal
momentumu ekileyen faktörler, sonraki adımlarda etkileri yok.</p>
<p>Başlangıç torku ve kuvvetin nasıl başlangıç hızına çevirilecebileceğini daha
önceki derste gördük.</p>
<p>Uygulanan kuvveti şöyle seçelim, STL objesi üzerindeki üçgenlerden birinin
köşesini son nokta olarak alalım, uzayda herhangi bir noktası başlangıç
noktası olarak alalım, ve ilk kuvvet bu vektör olsun.</p>
<pre><code class="python">import numpy.linalg as lin
from mpl_toolkits import mplot3d
from stl import mesh

mesh1 = mesh.Mesh.from_file('../../sk/2020/08/shapes/Prism_hexagon.stl')

def plot_vector1(fig, orig, v, color='blue'):
   &quot;'
   baslangıcı orig olan v büyüklüğü/yönünde olan vektorü çiz
   &quot;'
   ax = fig.gca(projection='3d')
   orig = np.array(orig); v=np.array(v)
   ax.quiver(orig[0], orig[1], orig[2], v[0], v[1], v[2],color=color)
   ax = fig.gca(projection='3d')  
   return fig

def plot_vector2(fig, torig, tend, color='blue'):
   &quot;'
   baslangic torig bitis tend olmak uzere bir vektor ciz
   &quot;'
   ax = fig.gca(projection='3d')
   v = tend - torig
   ax.quiver(torig[0], torig[1], torig[2], v[0], v[1], v[2],color=color)
   ax = fig.gca(projection='3d')  
   return fig

tidx = 7
f0 = np.array([40,20,10])
f1 = mesh1.vectors[tidx][0]
cog = mesh1.get_mass_properties()[1]

a = f1-f0
b = cog-f0
flin = (a.dot(b) / (lin.norm(b)**2))*b

tau = np.cross(f1-cog,f1-f0)
figure = plt.figure()
ax = mplot3d.Axes3D(figure)
obj = mplot3d.art3d.Poly3DCollection(mesh1.vectors)
obj.set_edgecolor('k')
obj.set_alpha(0.3)
ax.add_collection3d(obj)
plot_vector2(figure, f0, f1)
plot_vector1(figure, cog, tau, color='cyan')
plot_vector1(figure, f0, flin, color='cyan')
ax.plot(cog[0], cog[1], cog[2], 'gs')
ax.set_xlim(30,70);ax.set_ylim(-10,30); ax.set_zlim(-10,30)
ax.text(65,0,8,r'$\tau$',fontsize=20)
ax.text(35,5,8,r'$F$',fontsize=20)
ax.text(35,5,-3,r'$F_{cog}$',fontsize=20)
ax.view_init(elev=20, azim=40)
plt.savefig('phy_005_basics_06_01.jpg')
</code></pre>

<p><img alt="" src="phy_005_basics_06_01.jpg" /></p>
<p>Kuvvet uygulama yönü ve onun kütle merkezine doğru olan yansıması gösterildi,
ayrıca yerçekim merkezi de bir ufak küp olarak nesne içinde belirtiliyor.
Merkeze olan bileşen kuvveti gösteren vektörün üçü tabii ki merkeze dokunuyor
olmalı, biz burada gösterim amaçlı olarak hem kuvveti hem de bileşenini aynı
başlangıçtan gösterdik. Yansıtma hesabı için bkz [6]. Tork vektörü de
hesaplanıyor, ve COG çıkışlı olarak gösteriliyor. Objenin dönüşü bu vektör
etrafında ve vektörün büyüklüğüne oranlı hızda olacaktır.</p>
<p>[devam edecek]</p>
<p>Kaynaklar</p>
<p>[1] Eberly, <em>Game Physics 2nd Ed</em></p>
<p>[2] Bayramlı, <em>Diferansiyel Denklemler Ders 2</em></p>
<p>[3] Bayramlı, <em>Döndürme (Rotation) - 2</em></p>
<p>[4] Kuipers, <em>Quaternions and Rotation Sequences</em></p>
<p>[5] Bayramlı, <em>Normal Diferansiyel Denklemler, Trigonometri</em></p>
<p>[6] Bayramlı, <em>Lineer Cebir Ders 15</em></p>
          <div id="container-d84f574876e65b2d8f0c7bae784c22b3"></div>

          <br/><a href="../index.html">Yukarı</a>
        </section>          
      </div>
    </body>
</html>
