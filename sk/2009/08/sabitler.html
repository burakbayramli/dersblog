<h1>Sabitler</h1>
<p>Web uygulamasi sabit degerleri (constants) nasil almali? Bir
properties dosyasindan, muhakkak, fakat bu dosya EAR icinde mi disinda
mi olsa daha iyi?Disinda olmasi daha iyi; boylece bu dosyanin set
edilmesi tamamen derleme sistemi disinda, gelistirme ile alakali
degil, sonuca gonderme (deployment) ile ilgili. Sonuc ortaminda "ant"
olmasa bile, properties dosyasinda degisim yapabiliriz. Alttaki class
sabitleri okumak icin yazildi.</p>
<pre><code class="java">import org.apache.log4j.Logger;
import java.io.IOException;import
java.io.FileInputStream;
import java.util.Properties;

public class Constants
{
    transient Logger log = Logger.getLogger(&quot;logger&quot;);
    private static Constants _instance = null;
    Properties properties = new Properties();
    public static Constants instance() {
    if (_instance == null) {
        _instance = new Constants();
    }
    return _instance;
    }

    public Constants() {
    String userHome = System.getProperty(&quot;user.home&quot;).toLowerCase();
    try {
        log.debug(&quot;userHome =&quot; + userHome + &quot;/etc/pocketbudda.properties&quot;);
        properties.load(new FileInputStream(userHome +&quot;/etc/app.properties&quot;));
    } catch (IOException e) { Util.log(e); }
    }

    public String getString(String arg) {

    return properties.getProperty(arg);
    }

    public int getInt(String arg) {
    return new Integer(properties.getProperty(arg)).intValue();
    }

    public String[] getList(String arg) {
    String s = properties.getProperty(arg); return s.split(&quot;,&quot;);
    }
}
</code></pre>

<p>Uygulamamizin sabitleri, diyelim ki app.properties dosyasi, her zaman
$HOME/etc/ altinda aranir. Mesela JBoss baslatan "ubuntu" adli bir
kullanici ise, <code>/home/ubuntu/etc/app.properties</code> okunacak. Sabit
degerleri okumak icin uygulamamizin herhangi bir yerinde
<code>Constants.instance().getString("anahtar")</code> gibi bir cagri
yeterli. Dosya</p>
<pre><code>anahtar1=deger1
anahtar2=deger2
</code></pre>

<p>formatinda... Constants class'i listeler, sayilari "tip guvenlikli
(type safe)" bir sekilde okuyabilecek halde.Sabitleri Seam'e vermek
mumkun; uygulama baslayinca muhakkak islemesi garanti bir Action
class'i icine:@OutString showAds =
Constants.instance().getString("showAds");gibi bir tanim "showAds"
sabitini dis dunyaya de-enjekte edecektir. Artik</p>
<pre><code>&lt;s:div rendered=&quot;#{showAds == 'false'}&quot;&gt;
  &lt;img src=&quot;[imaj]&quot;/&gt;&lt;/s:div&gt;
</code></pre>

<p>gibi tanimlar xhtml sayfalari icinde kullanilabilir.</p>