<!DOCTYPE html>
<html>
  <head>
    <title>Vektör Calculus, Kurallar, Matris Türevleri
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [["$","$"]]}
      });
    MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
        cancel: ["Extension","cancel"],
        bcancel: ["Extension","cancel"],
        xcancel: ["Extension","cancel"],
        cancelto: ["Extension","cancel"]
      });
    });
    </script>
   <script type="text/javascript"
   src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full">
   </script>
   <link rel="stylesheet" type="text/css" media="screen" href="https://burakbayramli.github.io/css/style.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1548953794786292"
          crossorigin="anonymous"></script>  
  </head>
    <body>
      <div id="header_wrap" class="outer">
        <header class="inner">
          <h1 id="project_title">
            <a href="https://burakbayramli.github.io" style="text-decoration:none; color:inherit;">dersblog</a>
          </h1>
          <h2 id="project_tagline"></h2>          
        </header>
      </div>
      <div id="main_content_wrap" class="outer">        
        <section id="main_content" class="inner">
        <h1>Vektör Calculus, Kurallar, Matris Türevleri
</h1>

<p>Aksi belirtilmedikçe altta $a,x$ gibi vektörler kolon vektörleri olacaktır,
yani $m \times 1$, ya da $n \times 1$ gibi boyutlara sahip olacaklardır. </p>
<p>$m$ boyutlu vektör $x$'i alan ve geriye tek sayı sonucu döndüren bir $f(x)$
fonksiyonunun $x$'e göre türevini nasıl alırız? Yani $x \in \mathbb{R}^m$
ve bir vektör,</p>
<p>$$ x = 
\left[\begin{array}{ccc}
x_1 \\ \vdots \\ x_m
\end{array}\right]
 $$</p>
<p>Bu durumda $x$'in her hücresine / öğesine göre kısmi türevler (partial
derivatıves) alınır, sonuçta tek boyutlu / tek sayılı fonksiyon, türev 
sonrası $m$ boyutlu bir sonuç vektörünü yaratır, yani</p>
<p>$$
\frac{\partial f}{\partial x}  =
\left[\begin{array}{c}
\frac{\partial f}{\partial x_1} \\
\\
\frac{\partial f}{\partial x_2} \\
\vdots \\
\frac{\partial f}{\partial x_m} 
\end{array}\right]
$$</p>
<p>Bu sonuç tanıdık gelmiş olabilir, bu ifade gradyan olarak ta bilinir. </p>
<p>$$ \frac{\partial f}{\partial x}  = \nabla f = grad \ f(x) $$</p>
<p>Türev bir kolon vektörü olarak çıktı çünkü $x$ de bir kolon
vektörüydü. Elde edilen vektör sürpriz değil çünkü tek, skalar bir değer
veren bir fonksiyonun $x$ içindeki <em>her öğesinin</em> nasıl değiştiğine
göre bunun fonksiyon üzerindeki etkilerini merak ediyorduk, üstteki vektör
öğe bazında bize aynen bunu gösteriyor. Yani tek skalar sonuç $m$ tane
türev sonucuna ayrılıyor, çünkü tek sonucun $m$ tane seçeneğe göre
değişimini görmek istedik. </p>
<p>Not olarak belirtelim, gradyan vektörü matematiksel bir kısayoldur, yani
matematikte kuramsal olarak türetilerek ulaşılan ana kurallardan biri
denemez. Fakat çok işe yaradığına şüphe yok.</p>
<p>Eğer bir $A$ matrisinin tüm öğeleri tek sayı $\theta$ gibi bir değişkene
bağlı ise, o matrisin $\theta$'ya göre türevi, tüm elemanlarının teker
teker $\theta$'ya göre türevidir,</p>
<p>$$ 
\frac{\partial A}{\partial \theta} = 
\left[\begin{array}{cccc}
\frac{\partial a_{11}}{\partial \theta} &amp; 
\frac{\partial a_{12}}{\partial \theta} &amp; \dots &amp; 
\frac{\partial a_{1n}}{\partial \theta} 
\\
\frac{\partial a_{21}}{\partial \theta} &amp; 
\frac{\partial a_{22}}{\partial \theta} &amp;  \dots &amp; 
\frac{\partial a_{2n}}{\partial \theta}<br />
\\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots 
\\
\frac{\partial a_{m1}}{\partial \theta} &amp; 
\frac{\partial a_{m2}}{\partial \theta} &amp;  \dots &amp; 
\frac{\partial a_{mn}}{\partial \theta}<br />
\end{array}\right]
$$</p>
<p>Şimdi ilginç bir durum; diyelim ki hem fonksiyon $f(x)$'e verilen $x$
çok boyutlu, hem de fonksiyonun sonucu çok boyutlu! Bu gayet mümkün bir
durum. Bu durumda ne olurdu? </p>
<p>Eğer $f$'in türevinin her türlü değişimi temsil etmesini istiyorsak, o
zaman hem her girdi hücresi, hem de her çıktı hücresi kombinasyonu için bu
değişimi saptamalıyız. Jacobian matrisleri tam da bunu yapar. Eğer $m$
boyutlu girdi ve $n$ boyutlu çıktı tanımlayan $f$'in türevini almak
istersek, bu bize $m \times n$ boyutunda bir matris verecektir!
Hatırlarsak daha önce gradyan sadece $m$ boyutunda bir <em>vektör</em>
vermişti. Şimdi sonuç bir matris. </p>
<p>$$ 
J(x) = \frac{\partial f(x)}{\partial x} =
\left[\begin{array}{ccc}
\frac{\partial f_{1}(x)}{\partial x_1} &amp; \dots &amp; 
\frac{\partial f_{1}(x)}{\partial x_1} 
\\
\vdots &amp; \ddots &amp; \vdots 
\\
\frac{\partial f_{n}(x)}{\partial x_n} &amp; \dots &amp; 
\frac{\partial f_{n}(x)}{\partial x_n}<br />
\end{array}\right]
 $$</p>
<p>Hessian ise $f$'in ikinci türevlerini içerir [3]. Bu matrisin $i,j$'inci
öğesi fonksiyonun $\frac{\partial^2 f(x)}{\partial x_j \partial x_i}$'inci
türevidir, ki $x = [x_1,x_2,...,x_n]$ vektörü olmak üzere. </p>
<p>$$
\nabla^2 (x) = 
\left[\begin{array}{rrr}
\frac{\partial^2 f}{\partial x_1^2} &amp; \cdots &amp; \frac{\partial^2 f}{\partial x_1x_n}\\
\vdots &amp; \ddots &amp; \vdots \\
\frac{\partial^2 f}{\partial x_1x_n} &amp; \cdots &amp; \frac{\partial^2 f}{\partial x_n^2}\\
\end{array}\right]
$$</p>
<p>Hessian matrisı simetrik ve reel bir matristir. </p>
<p>Vektörlere gelelim. $a,x \in \mathbb{R}^n$ ise, $a^Tx$'in $x$'e göre türevi nedir? </p>
<p>$a^Tx$ bir noktasal çarpım olduğuna göre sonucu bir tek sayıdır
(scalar). Bu noktasal çarpımı bir fonksiyon gibi düşünebiliriz, bu durumda
demektir ki tek sayılı bir fonksiyonun çok boyutlu $x$'e göre türevini
alıyoruz, yani gradyan durumu tekrar vuku buldu,</p>
<p>$$ 
\frac{\partial (a^Tx)}{\partial x} = 
\left[\begin{array}{c}
\frac{\partial (a^Tx)}{\partial x_1} \\ 
\vdots \\ 
\frac{\partial (a^Tx)}{\partial x_n} 
\end{array}\right] 
 $$</p>
<p>$$  =
\left[\begin{array}{c}
\frac{\partial (a_1x_1 + ... + a_nx_n)}{\partial x_1} \\ 
\vdots \\ 
\frac{\partial (a_1x_1 + ... + a_nx_n)}{\partial x_n} 
\end{array}\right] 
= 
\left[\begin{array}{c}
a_1 \\
\vdots  \\
a_n
\end{array}\right] =
a
 $$</p>
<p>Niye her satırda $a_1,a_2$  gibi değerler elde ettiğimizin sebebi bariz
herhalde, çünkü mesela ilk satırda $x_1$'e göre türev alındığı durumda
$a_1x_1$ haricindeki tüm terimler yokolacaktır, çünkü o terimler içinde
$x_1$ yoktur ve Calculus'a göre sabit sayı sayılırlar.</p>
<p>Peki $a^Tx$'in $x^T$'ye göre türevi nedir? </p>
<p>$x^T$'nin yatay bir vektör olduğuna dikkat, yani satır vektörü, o zaman
sonuç yatay bir vektör olacaktır (kıyasla gradyan dikeydi).</p>
<p>$$ 
\frac{\partial (a^Tx)}{\partial x^T} = 
\left[\begin{array}{ccc}
\frac{\partial (a^Tx)}{\partial x_1} &amp;
\dots 
&amp;
\frac{\partial (a^Tx)}{\partial x_n} 
\end{array}\right] 
\qquad (1)
 $$</p>
<p>$$ =
\left[\begin{array}{ccc}
a_1 &amp; \dots &amp; a_n
\end{array}\right] = 
a^T $$</p>
<p>Eğer bir $x \in \mathbb{R}^m$ vektöründen $A$ matrisi $x$ ile çarpılıyor
ise, bu çarpımın $x$'e göre türevi nedir? </p>
<p>$$ \frac{\partial(Ax)}{\partial x^T} = A
$$</p>
<p>İspat: Eğer $a_i \in \mathbb{R}^n$ ise (ki devriği alınınca bu vektör yatay hale
gelir, yani altta bu yatay vektörleri üst üste istiflediğimizi düşünüyoruz),</p>
<p>$$ A = \left[\begin{array}{c}
a_1^T \\ \vdots \\ a_m^T
\end{array}\right] $$</p>
<p>O zaman $Ax$ ne olur? [4] yazısındaki "satır bakış açısı" düşünülürse,
$A$'in her satırı, ayrı ayrı $x$'in tüm satırlarını kombine ederek tekabül
eden sonuç satırını oluşturur (tabii bu örnekte $x$'in kendisi bir vektör o
yüzden "satırları" tek bir sayıdan ibaret),</p>
<p>$$ Ax = \left[\begin{array}{c}
a_1^Tx \\ \vdots \\ a_m^Tx
\end{array}\right] 
$$</p>
<p>Üstteki bir vektör, her öğesi tek sayı. Türevi alırsak (dikkat yatay
vektöre göre türev alıyoruz), ve (1)'i dikkate alırsak, </p>
<p>$$ 
\frac{\partial Ax}{\partial x^T}  =
\left[\begin{array}{c}
\frac{\partial(a_1^Tx) }{\partial x^T} 
\\ 
\vdots \\ 
\frac{\partial(a_m^Tx) }{\partial }
\end{array}\right] = \left[\begin{array}{c}
a_1^T \\ \vdots \\ a_m^T
\end{array}\right]  = A
 $$</p>
<p>Şu türev nasıl hesaplanır? </p>
<p>$$ 
\frac{\partial (x^TA^T)}{\partial x}
$$</p>
<p>Çarpımı açalım, $x$ devriği yatay bir vektör, $A$'nin satırları $a_i$'ler
ise devrik sonrası kolonlar haline gelirler, yani</p>
<p>$$ 
\left[\begin{array}{ccc}
x_1 &amp; \dots &amp; x_n
\end{array}\right]
\left[\begin{array}{ccc}
\uparrow &amp; &amp; \uparrow \\
a_1 &amp; \dots &amp; a_m \\
\downarrow &amp; &amp; \downarrow 
\end{array}\right]
 $$</p>
<p>Şimdi matris çarpımı satır bakışını kullanalım, çarpan $x$ satırı bir
tane, o zaman sonuç tek satır olacak. Bu tek $x$ satırının öğeleri, $A^T$
satırlarını teker teker çarpıp toplayacak ve o tek sonuç satırını meydana
getirecek. Yani $x_1,x_2,...$ sırayla $a_1$'in tüm öğelerini çarpıyor,
aynı şekilde $a_2$ için aynısı oluyor, vs. Bu durumu daha temiz bir
şekilde alttaki gibi belirtebiliriz,</p>
<p>$$ 
= \left(\begin{array}{ccc}
x^Ta_1 &amp; \dots x^Ta_m 
\end{array}\right)
$$</p>
<p>Bu ifadenin türevini almak çok kolay, </p>
<p>$$ 
= \left(\begin{array}{ccc}
\frac{\partial (x^Ta_1)}{\partial x} &amp;
\dots
\frac{\partial (x^Ta_m)}{\partial x} 
\end{array}\right)
$$</p>
<p>$$ 
= \left(\begin{array}{ccc}
a_1 &amp; \dots a_m 
\end{array}\right)
$$</p>
<p>$$ 
\frac{\partial (x^TA^T)}{\partial x} = A^T 
\qquad (2) 
$$</p>
<p>Başka bir türev: Diyelim ki $x \in \mathbb{R}^n, z \in \mathbb{R}^m$. 
Yeni bir vektör $c = A^Tz$ tanımlayalım ki vektör $n$ boyutunda. O zaman </p>
<p>$$ 
\frac{\partial (z^TAx)}{\partial x} =<br />
\frac{\partial (c^Tx)}{\partial x} = c =  A^Tz
$$</p>
<p>Diğer bir türev</p>
<p>$$ 
\frac{\partial (z^TAx)}{\partial z} =  Ax
$$</p>
<p>Üstteki (2)'nin bir sonucu olarak görülebilir.</p>
<p>Eğer $x=x(\alpha),z=z(\alpha)$ olursa, türev almada Zincir Kuralını kullanalım,</p>
<p>$$ 
\frac{\partial (z^TAx)}{\partial \alpha} =<br />
\frac{\partial (z^TAx)}{\partial x} \frac{\partial x}{\partial \alpha}  + 
\frac{\partial (z^TAx)}{\partial z} \frac{\partial z}{\partial \alpha}<br />
$$</p>
<p>$$ 
\frac{\partial (z^TAx)}{\partial \alpha} =<br />
A^Tz \frac{\partial x}{\partial \alpha}  + 
Ax \frac{\partial z}{\partial \alpha}<br />
$$</p>
<p>Eğer $z = x = \alpha$ dersek,</p>
<p>$$ 
\frac{\partial (x^TAx)}{\partial \alpha} =<br />
\frac{\partial (x^TAx)}{\partial x} =<br />
A^Tx \frac{\partial x}{\partial \alpha}  + 
Ax \frac{\partial x}{\partial \alpha}<br />
$$</p>
<p>$$ 
= Ax + A^Tx  = (A^T+A) x
$$</p>
<p>Diyelim ki $A$ simetrik bir matris, o zaman $A^T=A$, ve</p>
<p>$$ 
= (A^T+A)x = 2Ax
$$</p>
<p>$x^Tx$ ifadesinin $x$ vektörüne göre türevi nedir? En basit yol, $x^TAx$
kalıbını kullanmak, ve $A = I$ yani birim matrisi koymak. Bu durumda </p>
<p>$$ 
= \frac{\partial (x^TIx)}{\partial \alpha}  = 2Ix = 2x
 $$</p>
<p>Daha zor yoldan, bu bir noktasal çarpım olacaktır, $x_1x_1 + x_2x_2 + .. +
 x_nx_n$  yani $x_1^2 + x_2^2 + .. + x_n^2$. Bu tek bir skalar sonuç, o sonucun her
$x$ öğesine göre türevinin alınması,</p>
<p>$$ 
\left[\begin{array}{c}
\frac{\partial (x_1^2 + x_2^2 + .. + x_n^2)}{\partial x_1} \\
\dots \\
\frac{\partial (x_1^2 + x_2^2 + .. + x_n^2)}{\partial x_n} 
\end{array}\right]
 $$</p>
<p>$$ 
= \left[\begin{array}{c}
2x_1 \\
\dots \\
2x_n
\end{array}\right] = 
2x
 $$</p>
<p>İzler (Trace)</p>
<p>$$ \frac{\partial }{\partial A} Tr(A) = I $$</p>
<p>$$ \frac{\partial }{\partial A} Tr(AB) = B^T $$</p>
<p>$$ \frac{\partial }{\partial A} Tr(A^TB) = B $$</p>
<p>$$ \frac{\partial }{\partial A} Tr(ABA^T) = A(B + B^T) $$</p>
<p>Eğer $B$ simetrik ise üstteki şu hale getirilebilir</p>
<p>$$  = 2AB $$</p>
<p>Yönsel Türev (Directional Derivative)</p>
<p>Bir vektör fonksiyonu $f = \vec{f}(x,y,z)$ düşünelim, </p>
<p>$$
f = \left[\begin{array}{r} f_1(x,y,z) \\ f_2(x,y,z) \\ f_3(x,y,z) \end{array}\right]
$$</p>
<p>Formel olarak $f \cdot \nabla$ bir operatör tanımlar [2, sf. 74],</p>
<p>$$
f \cdot \nabla = 
\left[\begin{array}{ccc} f_1 &amp; f_2 &amp; f_3 \end{array}\right]
\cdot 
\left[\begin{array}{ccc} 
\frac{\partial }{\partial x} &amp; \frac{\partial }{\partial y} &amp; \frac{\partial }{\partial z} 
\end{array}\right]
$$</p>
<p>$$
= f_1 \frac{\partial }{\partial x} +
f_2 \frac{\partial }{\partial y} +
f_3 \frac{\partial }{\partial z} 
$$</p>
<p>Üstteki bir operatör. Onu mesela bir $g$ üzerinde uygulayabiliriz,</p>
<p>$$
(f_1 \frac{\partial }{\partial x} +
f_2 \frac{\partial }{\partial y} +
f_3 \frac{\partial }{\partial z}) 
g = 
f_1 \frac{\partial g}{\partial x} +
f_2 \frac{\partial g}{\partial y} +
f_3 \frac{\partial g}{\partial z} 
$$</p>
<p>Bazı Eşitlikler</p>
<p>$a,b$ vektör fonksiyonu olmak üzere, </p>
<p>$$
\nabla (a \cdot b) = 
(a \cdot \nabla) b + (b \cdot \nabla) a + 
a \times (\nabla \times b) + 
b \times (\nabla \times a)
$$</p>
<p>Kaynaklar </p>
<p>[2] Spiegel, <em>Vector Tensor Analysis</em></p>
<p>[3] Kutter, <em>Multivariable Advanced Calculus</em></p>
<p>[4] Bayramlı, Lineer Cebir, <em>Matris Çarpımı, Ders 1</em></p>
          <br/><a href="../index.html">Yukarı</a>
        </section>          
      </div>
    </body>
</html>
