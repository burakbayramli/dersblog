<!DOCTYPE html>
<html>
  <head>
    <title>Genel Çifteşlik / İkizlik (General Duality)
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [["$","$"]]}
      });
    MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
        cancel: ["Extension","cancel"],
        bcancel: ["Extension","cancel"],
        xcancel: ["Extension","cancel"],
        cancelto: ["Extension","cancel"]
      });
    });
    </script>
   <script type="text/javascript"
   src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full">
   </script>
   <link rel="stylesheet" type="text/css" media="screen" href="https://burakbayramli.github.io/css/style.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1548953794786292"
          crossorigin="anonymous"></script>  
  </head>
    <body>
      <div id="header_wrap" class="outer">
        <header class="inner">
          <h1 id="project_title">
            <a href="https://burakbayramli.github.io" style="text-decoration:none; color:inherit;">dersblog</a>
          </h1>
          <h2 id="project_tagline"></h2>          
        </header>
      </div>
      <div id="main_content_wrap" class="outer">        
        <section id="main_content" class="inner">
        <h1>Genel Çifteşlik / İkizlik (General Duality)
</h1>

<p>Bu derste [1] genel dışbükey problemlerinde ikizlik konusunu göreceğiz, ek
olarak dışbükey olmayan durumlara da bakacağız. İkizlik oldukça genel bir
konu.</p>
<p>Önceki derste ikizliği elde etmenin ikinci yönteminde </p>
<p>$$
L(x,u,v) \equiv c^T x + u^T (Ax-b) + v^T (Gx-h) 
$$</p>
<p>tanımı üzerinden (Lagrangian)</p>
<p>$$
f^\ast = \min_{x \in C} L(x,u,v) \ge \min_x L(x,u,v) \equiv g(u,v)
$$</p>
<p>şeklinde bir formül elde etmiştik, $u,v$ sabitlendiği durumda ve $x \in C$
olurlu çözümleri kümesi olacak şekilde, ve bu küme üzerinden Lagrangian'ın,
tüm $x$'ler üzerinden olan Lagrangian'dan her zaman daha büyük olacağını
görmüştük. Aslında bu çok basit bir fikir ama bu basit ve kuvvetli fikir
sayesinde ikizliği genel problemlere uygulamak mümkün oluyor. </p>
<p>Ayrıca, sonradan göreceğimiz üzere, en sağdaki eşitsizlik ikiz çözüm $u,v$
noktasına sıkı (tight), yani olurlu kümeyi bir yana atarak bir şey
kaybetmiş olmadık. Yani üstte görülen eşitsizlik bazılarına gevşek
gelebilir, ama doğru $u,v$'de son derece sıkıdır. </p>
<p>Neyse devam edersek, yine üstte görülen $g(u,v)$ $u,v$'nin bir fonksiyonu
ve işin güzel tarafı çoğunlukla hesaplanabilir bir fonksiyon. Yani
$L(x,u,v)$'yi $x$ üzeriden minimize etmek $u,v$'nin bir fonksiyonu. </p>
<p>Bir diğer deyişle, $g(u,v)$ fonksiyonu $f^\ast$ üzerinde herhangi bir $u$ ve
$v \ge 0$ için bir alt sınır. Ikiz fonksiyonu olarak isimlendirilen $g$.</p>
<p>Lagrangian'ı tekrar düzenleyerek alttakini elde etmiştik, </p>
<p>$$
g(u,v) = \left\{ \begin{array}{ll}
-\infty &amp; \text{eğer} \quad c^T + A^Tu + G^T v \ne 0 \\
- b^T u - h^Tu &amp; \text{eğer} \quad c^T + A^Tu + G^T v = 0 
\end{array} \right.
$$</p>
<p>Şimdi LP'lerden ilerleyip, düşünebildiğimiz en genel optimizasyon formuna
bakacağız. Dişbükey (convex) olması şart değil ama tabii ki dışbükey
durumlara özel ilgi göstereceğiz. Form,</p>
<p>$$
\min_{x} f(x), \quad \textrm{öyle ki}
$$
$$
h_i(x) \le 0, \quad i=1,..,m
$$
$$
l_j(x) \le 0, \quad j=1,..,r
$$</p>
<p>Eğer sadece dışbükeylige bakıyor olsaydık $f,h_i$'lerin dışbükey,
$l_i$'lerin ise doğrusal olması gerekirdi. Lagrangian'i tanımlayalım, hala
çok genel bir şekilde yaklaşıyoruz tabii, </p>
<p>$$
L(x,u,v) = f(x) + \sum_{i=1}^{m} u_i h_i(x) + \sum_{i=1}^{r} v_i l_i(x) 
$$</p>
<p>Eşitlik ve eşitsizlik kritlerini ikiz değişkenler ile çarpıp topluyoruz, ve
hedefe ekliyoruz. Daha önce olduğu gibi eşitlik kısıtlamarını çarpan
$u_i$'lar sıfır olmamalı çünkü $f(x)$ ile Lagrangian arasında bir ilişki
kuracağız, ve ana problemdeki eşitsizlin işaret değiştirmesini
istemiyoruz. </p>
<p>Bu arada "ikiz değişkenler" kelimesi duruma göre bazen "Lagrange
çarpanı" olarak görülebilir. </p>
<p>Önemli özellik, her $v$ ve $u \ge 0$ için, her olurlu $x$ noktasında</p>
<p>$$
f(x) \ge L(x,u,v)
$$</p>
<p>Niye? Daha önce LP'lerle gördüğümüz fikirle aynı durum, olurlu noktalarda</p>
<p>$$
L(x,u,v) =  f(x) + 
\sum_{i=1}^{m} u_i \underbrace{h_i(x)}<em>{\le 0} + 
\sum</em>{i=1}^{r} v_i \underbrace{l_i(x)}_{=0}
$$</p>
<p>Olurlu noktalarda $l_i$'ler sıfır, o zaman tüm $l_i$'leri toplamı yokolur,
$u_i$'lerin hepsi sıfırdan büyük olmalı ve olurlu noktada $h_i$'ler
sıfırdan küçük, pozitif çarpı negatif eşittir negatif, toplam negatif,
$f(x)$'den bir değer eksiltilmiş olacaktır, bu da muhakkak $f(x)$'den küçük
bir sonuca sebep olacaktır, iki üstteki bu şekilde ispatlanmış olur.</p>
<p>Üstteki fonksiyonu, parçalarını grafiksel olarak alttaki gibi görebiliriz,</p>
<p><img alt="" src="func_56_gendual_01.png" /></p>
<p>Kesiksiz çizgi kriter / hedef fonksiyonu örnek bir $f$. Dikkat edersek
görülen $f$ dışbükey değil, bunu genel dışbükey olmayan ortamlarda da
tekniğin işlediğini göstermek için yaptık. </p>
<p>Noktalı eğrilerin her biri farklı $u$'lar için $L$'nin değerleri, ayrıca
olurlu kümeyi $[-0.46,0.46]$ arasında olacak şekilde seçtik. Yani </p>
<p>$$
\min_{x} f(x), \quad \textrm{öyle ki}
$$
$$
h_i(x) \le 0
$$</p>
<p>programını ele almış olduk, noktalalı eğriler ile çizilen ise </p>
<p>$$
L(x,u) = f(x) + u l(x)
$$</p>
<p>Devam edersek belli bir $f^\ast$ minimumu düşünelim, </p>
<p>$$
f^\ast \ge \min_{x \in C} L(x,u,v) \ge \min_x L(x,u,v) \equiv g(u,v)
$$ </p>
<p>LP örneğindeki yaklaşım, sadece olurlu küme $C$ yerine tüm $x$'ler
üzerinden minimizasiyon bir alt sınır oluşturur. $g(u,v)$'ye ikiz fonksiyon
diyoruz.</p>
<p>Peki niye $g(u,v)$ tanımını $\min_{x \in C} L(x,u,v)$ için yapmadım, tüm
$x$'ler üzerinden olan kısıtlanmamış versiyon için yaptım? Çünkü tüm
$x$'ler üzerinden olan tanım bizim için daha faydalı. O tür ifadeler
üzerinde analitik çözüm geliştirmek daha rahattır, analitik çözüm olmasa
bile tüm $x$'ler üzerinden yaklaşım daha faydalı. Tabii hala bazı
kısıtlamalar var, mesela $u \ge 0$ olmalı.</p>
<p>İkiz fonksiyon $g$'nin $\lambda$'ya (aslında $u$) gore bir grafiğini altta görüyoruz,</p>
<p><img alt="" src="func_56_gendual_02.png" /></p>
<p>Kesikli çizgi kriter, ve $g$ her $\lambda$ için kriterin hep altında.</p>
<p>Peki niye ikizi yapabildiğim en büyük değer kriterin olurlu kümede
olabilecek en ufak değerine eşit değil (ikizin tepesi kesikli çizgiye
değmiyor)? Çünkü elimizdeki bir dışbükey olmayan fonksiyon. Dişbükeylik
olsaydı alt sınır sıkı olurdu. Dışbükey olmayan fonksiyonlarda da sıkılık
görülebilir ama dışbükeylik durumundaki gibi bu şart değildir.</p>
<p>Biraz daha zor bir örneğe bakalım. </p>
<p>Standart formda bir karesel program (QP). </p>
<p>$$
\min_x \frac{1}{2} x^T Q x + c^T x \quad \textrm{öyle ki}
$$
$$
Ax = b, \quad x \ge 0
$$</p>
<p>ki $Q$ pozitif kesin, $Q \succ 0$ olarak gösterilir, en küçük özdeğeri
harfiyen sıfırdan büyük (yani $&gt;0$, $\ge 0$ değil), bu durumda üstteki
problem harfiyen dışbükey olur.</p>
<p>Lagrangian için öğrendiğimiz tarifi uygularsak, </p>
<p>$$
L(x,u,v) = \frac{1}{2} x^T Q x + c^Tx  - u^T x + v^T (Ax - b)
\qquad (2)
$$</p>
<p>İkiz fonksiyonu bulalım şimdi. $x$, üzerinden minimizasyon yapılan değişken
olacağı için $g$'de olmayacak, yani</p>
<p>$$
g(u,v) = \min_x L(x,u,v) 
$$</p>
<p>$x$'ler üzerinden ufak bir gruplama sonrası</p>
<p>$$
= \min_x \frac{1}{2} x^T Q x + (c - u + A^T v)^T x - b^T v<br />
\qquad (1)
$$</p>
<p>Bu minimumu nasıl buluruz? Gradyanı alıp sıfıra eşitleriz değil mi? Tabii
üstteki tanıdık bir formda, eğer tek boyuttan hatırlarsak, </p>
<p>$$
ax^2 + bx + c
$$</p>
<p>formülü olsaydı, çözüm $x^\ast = \frac{-b}{2a}$ olurdu. Çok boyutlu vektörel
formda</p>
<p>$$
\frac{1}{2} x^T Q x + b^T x
$$</p>
<p>için çözüm $x^\ast = -Q^{-1} b$. Bunu biliyorum çünkü pek çok kez bu çözümü
türettim, hatırlıyorum. Bu formu bizim probleme uygularsak, (1) içindeki
parantezde görülen $c - u + A^T v$ kısmı üstteki $b$ oluyor. O zaman
Lagrangian'ın minimize edicisi</p>
<p>$$
x^\ast = -Q^{-1} (c - u + A^T v)
$$</p>
<p>O zaman Lagrangian'ın minimum noktası üstteki minimize ediciyi formüle geri
sokunca elde edeceğim şey</p>
<p>$$
\min_x L(x,u,v) = L(x^\ast,u,v)
$$</p>
<p>$$
= \frac{1}{2} 
(c - u + A^Tv)^T Q^{-1} (c - u + A^Tv) - 
(c - u + A^Tv)^T Q^{-1} (c - u + A^Tv) - b^T v
$$</p>
<p>Geriye tek $Q^{-1} $ kaldı çünkü (2)'ye $x^\ast$'i soktuğumuz zaman $Q$ ile
çarpılan ilk $Q^{-1} $ iptal oldu, ikincisi geriye kaldı, basitleştirince
Lagrange ikiz fonksiyonu elde ediyoruz,</p>
<p>$$
g(u,v) = -\frac{1}{2} (c - u + A^Tv)^T Q^{-1}  (c - u + A^Tv) - b^Tv
\qquad (3)
$$</p>
<p>Yani bana verilen her $u \ge 0$ ve herhangi $v$ için hesaplayacağım üstteki
formül, bana karesel programın optimumu için bir alt sınır veriyor.</p>
<p>Hiç te önemsiz olmayan bir sonuç, ama bu noktaya son derece önemsiz (gibi
gözüken), gayet basit ifadeleri bir araya koyarak geldik. Ama karesel
program için elde ettiğimiz sonuca bakın. Başta gördüğümüz genel form bir
QP. (3)'un bu QP'nin optimal değeri için bir alt sınır oluşturacağı ilk
bakışta bariz gibi durmuyor. Ama bu böyle, ve Lagrangian ikiz fonksiyonun
bir özelliğinin sonucu bizi buraya getiriyor, birkaç satırlık ifadeyle
üstteki kuvvetli sonucu doğrulayabiliyoruz.</p>
<p>Farklı bir varyasyona bakalım şimdi, ya $Q \succeq 0$ olsaydı, yani $Q$
pozitif yarı kesin olsaydı?</p>
<p>Bu durumda yine Lagrangian'in gradyanını alıp sıfıra eşitlerdik, vs. ve </p>
<p>$$
Qx = -(c-u+A^Tv) 
\qquad (4)
$$</p>
<p>elde ederdik, fakat $Q$'nun tersini alıp $x$'i elde edemezdik çünkü $Q$
pozitif kesin değil. </p>
<p>Çözüm için iki şartı gözönüne almak lazım,</p>
<p>1) $c-u+A^T v \in col(Q)$ ki $col(Q)$ $Q$'nun kolon uzayı demek, yani (4)
lineer ifadesini tatmin eden bir $x$ var. Bu durumda $x^\ast$</p>
<p>$$
x^\ast = -Q^{+}(c-u+A^Tv)
$$</p>
<p>olarak yazılabilir, ki $^+$ işareti genelleştirilmiş ters (generalized
inverse) demek. Bu işleme bazen sözde ters (pseudo inverse) ismi de
veriliyor, ve çoğunlukla eşsiz değer ayrıştırması (singular value
decomposition) üzerinden tanımlanıyor. Ama $Q$ simetrik olduğu için onun öz
ayrıştırmasını (eigen decomposition) yazsam da olur herhalde, $Q$'yu şu
sekilde yazsaydım,</p>
<p>$$
Q = U D U^T
$$</p>
<p>Eğer $Q$ pozitif yarı kesin ise o zaman $D$ içinde bazı değerlerin sıfır
olması mümkün, yani şunun gibi bir durum olabilir, </p>
<p>$$
= U \left[\begin{array}{ccccc}
d_1 &amp; &amp; &amp; &amp; \\
&amp; \ddots &amp; &amp; &amp; \\
&amp; &amp; d_r &amp; &amp; \\
&amp; &amp;  &amp; 0 &amp; \\
&amp; &amp;  &amp;  &amp; 0 
\end{array}\right]
U^T
$$</p>
<p>$Q^+$ sözde tersini tanımlamanın bir yolu üstteki öz ayrıştırma
üzerindendir (dikdörtgensel matrisler için SVD üzerinden). </p>
<p>Ama ondan önce bir soru, eğer tüm değerleri sıfır olmayan bir $D$ üzerinden
bir öz ayrıştırmam olsaydı? Basit, $U D^{-1} U^T$ değil mi? Unutmayalım $U$
matrisi dikgen.</p>
<p>Ama pozitif yarı kesinlik var, o yüzden $D$'nin tersini alamıyorum. Bu
sebeple sözde ters işlemi $D$ içindeki tersi alınabilen değerlerin tersini
alıp diğerlerini olduğu gibi bırakmak üzerinden tanımlanmıştır. </p>
<p>$$
Q^+ = U \left[\begin{array}{ccccc}
1/d_1 &amp; &amp; &amp; &amp; \\
&amp; \ddots &amp; &amp; &amp; \\
&amp; &amp; 1/d_r &amp; &amp; \\
&amp; &amp;  &amp; 0 &amp; \\
&amp; &amp;  &amp;  &amp; 0 
\end{array}\right]
U^T
$$</p>
<p>Üsttekine bazen "Moore-Penrose sözde tersi" ismi verildiğini de
duyabilirsiniz, aslında pek çok farklı sözde ters yöntemleri var, ama
standart olan üstteki.</p>
<p>Yani bu durumda $c-u+A^T v$'nin içinde $Q$'nun kolon uzayında olmayan bazı
öğeleri var, yani bu bazı öğeler $col(Q)$'a dikgen olan bir uzaydalar,
sıfır (null) uzayındalar. $Q$ simetrik olduğu için kolon uzayıyla sıfır
uzayı birbirini dikgen tamamlıyor.</p>
<p>$$
c-u+A^T v \perp null(Q)
$$</p>
<p>2) Bu durumda üstteki sıfır uzayıyla olan dikgenlik doğru değil. O zaman ne
olur? O durumda (4)'ün çözümü yoktur. O zaman (1)'ın minimizasyonuna ne
olacak? (1)'i istediğimiz kadar ufak yapabiliriz, yani $-\infty$'a kadar
gidebiliriz. Çünkü düşünürsek sıfır uzayında olan $x$ seçeneği (1)'in ilk
terimini sıfır yapar, ama ikinci terimi istediğimiz yöne çekebiliriz, ta ki
$-\infty$ olana kadar.</p>
<p>$$
g(u,v) = 
\left\{ \begin{array}{ll}
-\frac{1}{2} (c - u + A^Tv)^T Q^{-1}  (c - u + A^Tv) - b^Tv &amp; 
  \textrm{eğer } c - u + A^Tv \perp null(Q)\\
-\infty &amp; \textrm{eğer tersi doğruysa}
\end{array} \right.
$$</p>
<p>Şimdi geri bir adım atıp her şeye bakalım. Elimizde bir QP varsa Lagrange
ikiz fonksiyon da karesel, o zaman Lagrange ikizi maksimize etmek hala bir
QP. Yani QP'lerin ikizleri yine QP. </p>
<p>Biraz önce gördüğümüz QP örneğinde Lagrange ikiz karesel, ama tanım
kümesinde (domain) bir kısıtlama var, üstteki $g(u,v)$'de görüyoruz. Fakat
bu tanım kümesi kısıtlamasını bir QP kısıtlamasına çevirebiliriz, spesifik
olarak $u,v$ üzerinde bir eşitlik kısıtlamasına. $null(Q)$'ya dikgen olmak
demek $Q$'nun sıfır uzayına olan yansıtma matrisini, $P$ diyelim, alıp
$c - u + A^Tv$ ile çarparsam sıfır sonucunu almalıyım. Bunu eşitlik
kısıtlaması olarak kodlayabilirim. Tabii bu tür bir eşitlik kısıtlaması
eklemek ikiz problemi daha çetrefil hale getirecektir.</p>
<p>Bir diğer örneğe bakalım. Bu çok daha basit bir karesel program, iki
boyutlu. </p>
<p>$$
\min_{x \in (x_1,x_2)} f(x) = \frac{1}{2} x^T Q x b^T x \quad \textrm{öyle ki}
$$
$$
x \ge 0
$$</p>
<p>İkiz fonksiyon</p>
<p>$$
g(u) = \min_x \frac{1}{2} x^T Q x + b^T x - u^T x 
$$</p>
<p>ki $u = (u_1,u_2)$</p>
<p>Ana problem karesel, ikiz de karesel. Problemleri grafik olarak görelim,
hem ana (primal) hem de ikiz (dual) aynı grafikte olacak şekilde,</p>
<p><img alt="" src="func_56_gendual_03.png" /></p>
<p>İkizin nasıl gözükeceğini daha önceki örneklerden tahmin edebilirdik, (3)
formülünde eksi işareti var, ikiz bir içbükey yüzey olacak.</p>
<p>İlginç bir şey görüyoruz, ana problemin en küçük olduğu nokta ikizin en
büyük olduğu noktada. Üstteki sistem sıkı olacak gibi duruyor, eğer üstteki
$g(u)$'yu maksimize etmek bana $f^\ast$'i geri verecek.  Bu durumun bu örneğe
özel olmadığını belirtmek isterim, dışbükey problemlerde sık sık olan bir
şey bu. </p>
<p>Bir diğer ilginç durum, ikiz çözümün nerede olduğu, yani $u_1,u_2$'den
bahsediyorum, kriterden değil. Kriter çözüm noktasında ana ve ikizde
uymalı. İkiz çözüm $(0,0)$'da. Ana çözüm, resimden pek belli olmuyor ama
$x_1,x_2$ kordinat sisteminin içlerine doğru bir yerlerde yani her ikisi de
harfiyen pozitif. Bu bir raslantı mı? Yani $x_1,x_2$ harfiyen pozitif ise
(yani $&gt;0$) ikizin sıfır olma durumu? </p>
<p>Değil. Burada olan birbirini tamamlayan serbestlik (complementary
slackness) durumu. Bu kavramı Karush-Kuhn-Tucker (KKT) şartlarını
işlediğimizde öğreneceğiz. Eğer problemde gördüğümüz sınırlamaların
herhangi biri çözüm noktasında sıkı değilse ona tekabül eden ikiz değişken
sıfır olmalı. Bu olması gereken bir fenomen ve ispatını da yapacağız.
Üstteki örnekte her iki şart da çözümde sıkı değil, $x$ her iki kordinatta
da sıfırdan büyük, bu her iki ikiz değişkeni çözümde sıfır olmaya zorluyor.</p>
<p>Tekrar üzerinden geçersek, bir ana problem,</p>
<p>$$
\min_x f(x) \quad \textrm{öyle ki}
$$
$$
h_i(x) \le 0, \quad i=1,..,m
$$
$$
l_j(x) = 0, \quad j=1,..,r
$$</p>
<p>için bir ikiz $g(u,v)$ oluşturabiliriz ki her zaman $f^\ast \ge g(u,v)$
olacaktır her $u \ge 0$ ve $v$ için. O zaman en iyi alt sınır $g(u,v)$'yi
<em>tüm</em> olurlu $u,v$'ler üzerinden maksimize ederek elde edilir. Bu bize
Lagrange ikizi problemi verir,</p>
<p>$$
\max_{u,v} g(u,v) \quad \textrm{öyle ki}
$$
$$
u \ge 0
$$</p>
<p>Önemli bir özellik zayıf ikizlik durumu, eğer ikizin optimal değerine $g^\ast$
dersek $f^\ast \ge g^\ast$.</p>
<p>Üstteki ilişki ana problem dışbükey olmasa bile işliyor. Yani elimizde
müthiş dışbükey olmayan çok zor bir optimizasyon problemi olabilir, ama
onun ikizini oluşturursak bu yeni problemin optimal değeri her zaman ana
problem için bir alt sınır oluşturuyor. Bazen bu optimal değerin kendisi
bile faydalı, belki kriter fonksiyonun kendisi mesela bir ekonomik bedel,
bir yol miktarı, vs gibi bir şeyi temsil ediyor ve ona iyi bir alt sınır
bulmak bile bize önemli bir bilgi veriyor.</p>
<p>Şimdi sıkı durun, dahası da var. Birazdan bahsedeceğim şey ilk duyanları
çok şaşırtıyor. İkiz problem <em>her zaman</em> bir içbükey / dışbükey
optimizasyon problemi. Bu önemli çünkü dışbükey programları bir şekilde
muhakkak sayısal olarak çözebiliyoruz, <code>cvx</code> paketi ile belki, ya da
altgradyan (subgradient) metotlarıyla.. bir şekilde bu olur. Bilimin
vardığı nokta burası, o problem çözüldü. Bu çok iyi çünkü eğer ana problem
minimizasyon problemi ise ikiz her zaman içbükey maksimizasyon, ya da diğer
yönde ana problem maksimizasyon ise ikiz dışbükey minimizasyon, ve içbükey
/ dışbükey problemi çözebiliyoruz. Bu her zaman doğru, ana problem ne
olursa olsun.</p>
<p>Niye? İspatını yapacağız, ana maksimizasyondan başlayarak $g$'nin her zaman
bir içbükey fonksiyon olduğunu ispatlayacağız. Bu ispat çok basit
aslında. Tanım itibariyle,</p>
<p>$$
g(u,v) = \min_x \left\{ 
f(x) + \sum_{i=1}^{m} u_i h_i(x) + \sum_{i=1}^{r} v_i l_i(x) 
\right\}
$$</p>
<p>Her şeyi eksi ile çarparsak üsttekini bir maksimizasyona çevirebiliriz,</p>
<p>$$
= -\max_x \left\{ 
-f(x) - \sum_{i=1}^{m} u_i h_i(x) - \sum_{i=1}^{r} v_i l_i(x) 
\right\}
$$</p>
<p>Şimdi $\max$ başındaki eksiye bakmadan geri kalanlara bakalım. $u,v$
üzerinden düşünürsek üstte çarpımlar ve toplamlar var. $u,v$ açısından
$f(x)$ bile bir sabitin toplamı demektir. Çarpım toplamlar doğrusal
fonksiyondur, doğrusal fonksiyonlar ise dışbükeydir. Şimdi $\max$ basındaki
eksiyi de hesaba katarsak dışbükey içbükey olur (ama hala aynı
familyadayız). Yani ikizde elimizde kesinlikle bir içbükey problem olmalı.</p>
<p>Fakat genel uygulamalarda önümüze bazı engeller çıkabiliyor. Mesela
Lagrangian'ın kendisinin hesabı oldukca çetrefil olabilir. Eğer ana problem
dışbükey ise Lagrangian hesabı kolay ama çetrefil $f(x)$'ler için bu iş
daha zor. Yani dışbükey olmayan ana problemin şanslıysak ikiz hesabı
kolaydır, ama çoğunlukla iş zor. </p>
<p>Altta bir örnek seçtim, öyle ki ikiz hesaplanabilir halde olacak, her ne
kadar ana problem olmasa da. </p>
<p>$$
\max f(x) = x^4 - 50x^2 + 100x, \quad \textrm{öyle ki} \quad x \ge -4.5
$$</p>
<p>Problemin grafigi altta</p>
<p><img alt="" src="func_56_gendual_04.png" /></p>
<p>Sol grafikteki koyu siyah nokta ikizdeki maksimuma tekabül eden nokta,
gerçek minimum değil, o minimum biraz daha sola doğru. Sağdaki ikiz
grafiğini hesapladım, $u$ yok tabii çünkü eşitlik kısıtlaması yok. İkizin
içbükey olduğuna dikkat. Ana problem dışbükey değil, ama ikiz içbükey. </p>
<p>Ayrıca ikiz aşağı yukarı "parçalı lineer" denebilecek bir halde, ki bu
durum da ana problem dışbükey olmadığında yaygın şekilde görülen bir durum.</p>
<p>Bu arada eğer $g$'yi cebirsel olarak türetirsek, oldukca çetrefil bir form
elde edeceğimizi görebiliriz [türetim atlandı, burada benim notum, içbükey
bir problemi pür sayısal olarak çözmenin nasıl olsa mümkün olacağı].</p>
<p>Güçlü İkizlik </p>
<p>Daha önce $f^\ast \ge g^\ast$ olması gerektiğini gördük. Fakat pek çok problemde </p>
<p>$$
f^\ast = g^\ast
$$</p>
<p>olduğunu da gördük. Yani ana ve ikiz problem arasında hiç boşluk yok. Buna
güçlü ikizlik ismi veriliyor. Hatta bu durum neredeyse her dışbükey
optimizasyon probleminde ortaya çıkıyor. Neredeyse dedik çünkü Slater şartı
denen bir şart da lazım bu şarta göre eğer olurlu kümede tüm eşitlik tüm
eşitsizlik şartlarını harfiyen yerine getiren en az bir nokta varsa o zaman
güçlü ikizlik var. Harfiyen derken tüm eşitlik şartları sıfıra eşit, tüm
eşitsizlikler sıfırdan küçük olmalı.</p>
<p>Çoğunlukla bu çok, çok zayıf bir şart, yani yerine getirmesi çok
kolay. Yani ana problemin dışbükey olup da Slater şartına uymaması çok
nadirdir, eğer ana problemde çok absürt şartların olması lazım. </p>
<p>Slater şartının LP'ler için anlamı nedir? LP'ler zaten doğal olarak
dışbükeydir, ama onlar için zaten tüm şartlar doğrusal olduğu için LP
olurlu ise otomatik olarak güçlü ikizlik vardır [gerisi atlandı] </p>
<p>İkizlik Boşluğu (Duality Gap)</p>
<p>Bir basit kavrama daha değinelim. Basit ama çok faydalı olabilir, mesela
ana ve ikizi optimize etmek içi bir özyineli algoritma geliştiriyorsunuz,
ve bir olurlu $x$'imiz ve olurlu $u,v$'miz var ise, </p>
<p>$$
f(x) - g(u,v)
$$</p>
<p>büyüklüğünü hesaplayabiliriz. Bu niye faydalı? Çünkü ikizlik boşluğu her
zaman $f(x)$'in optimale yakınlığına bir üst sınır oluşturur, </p>
<p>$$
f(x) - f^\ast \le f(x) - g(u,v) 
\qquad (5)
$$</p>
<p>Nasıl türetildi? $g(u,v) \le f^\ast$ olduğunu biliyoruz, ya da
$-g(u,v) \ge -f^\ast$. Sonra $f(x)=f(x)$ ile başlayarak bir tarafa $-f^\ast$
diğerine $-g(u,v)$ ekleriz, üstteki eşitsizliği elde ederiz.</p>
<p>O zaman ana ve ikizi optimize etmek içi bir özyineli algoritma
geliştirirken "optimal kritere ne kadar yakınım?" diye merak ediyorsak,
(5) hesabını yaparsak o değerden daha uzak olamayacağımızı biliriz. Eğer
0.001 almışsak, 0.001'dan uzak olamayız. Tabii aynı argüman ikiz kriteri
için de geçerli, ondan da 0.001'den daha uzakta olamayız, $g^\ast-g(u,v)$ aynı
şekilde sınırlanmıştır.</p>
<p>Bu kavramları özyineli algoritmada bir durma şartı olarak kullanabiliriz.
Eğer $f(x) - g(u,v) &lt; \epsilon$ ise $f(x) - f^\ast &lt; \epsilon$ olması
garantidir, geldiğimiz nokta bir "$\epsilon$ alt optimalliktir", ya da
bir "$\epsilon$ alt optimal sonucu" elde etmişizdir.</p>
<p>Bu kavram KKT şartlarına gelince de faydalı olacak. </p>
<p>Kaynaklar</p>
<p>[1] Tibshirani, <em>Convex Optimization, Lecture Video 11</em>, 
<a href="https://www.youtube.com/channel/UCIvaLZcfz3ikJ1cD-zMpIXg">https://www.youtube.com/channel/UCIvaLZcfz3ikJ1cD-zMpIXg</a>   </p>
        </section>          
      </div>
    </body>
</html>
