<!DOCTYPE html>
<html>
  <head>
    <title>Ders 4
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [["$","$"]]}
      });
    MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
        cancel: ["Extension","cancel"],
        bcancel: ["Extension","cancel"],
        xcancel: ["Extension","cancel"],
        cancelto: ["Extension","cancel"]
      });
    });
    </script>
   <script type="text/javascript"
   src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full">
   </script>
   <link rel="stylesheet" type="text/css" media="screen" href="https://burakbayramli.github.io/css/style.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1548953794786292"
          crossorigin="anonymous"></script>  
  </head>
    <body>
      <div id="header_wrap" class="outer">
        <header class="inner">
          <h1 id="project_title">
            <a href="https://burakbayramli.github.io" style="text-decoration:none; color:inherit;">dersblog</a>
          </h1>
          <h2 id="project_tagline"></h2>          
        </header>
      </div>
      <div id="main_content_wrap" class="outer">        
        <section id="main_content" class="inner">
        <h1>Ders 4
</h1>

<p>Önceki derste Lie grup ve cebiri gördük. Lie cebirine geçiş sebebi lineer bir
uzayda optimizasyon yapmak istememiz, alternatif gayrı-lineer uzayda, zor
kısıtlamalar üzerinden optimizasyon. Lie cebiri ile işleri
kolaylaştırdık. Ayrıca cebirden gruba giden bir üstel harita oluşturduk, ve onun
tersi bir logaritma idi.</p>
<p>Sonra fırıldak cebirini gördük, ki bir $4 \times 4$ matrisi olan
$\hat{\xi}$, eğri $g(t)$'ye üzerinde bir teğet vektör olarak
görülebilirdi, ve $\hat{\xi}$'ye bir fırıldak ismini verdik. $g(t)$'yi
sağdan çarpınca alttakini elde etmiştik.</p>
<p>$$ \dot{g} = \dot{g}g^{-1}g = \hat{\xi} g $$</p>
<p>so(3) durumunda olduğu gibi tüm mümkün fırıldaklar bir teğet uzayı
oluşturuyorlardı, ki bu uzay bir Lie cebiridir.</p>
<p>$$ 
se(3) \equiv \bigg\{
\hat{\xi} =
\left[\begin{array}{rrr}
\hat{w} &amp; v \\ 0 &amp; 0
\end{array}\right] 
\biggm\vert
\hat{w} \in so(3), v \in \mathbb{R}^3 
\bigg\}
\subset \mathbb{R}^{4 \times 4}
 $$</p>
<p>Üstteki uzay Lie grubu SE(3)'e teğet idi.</p>
<p>Daha önce olduğu gibi $\land$ ve $\lor$ operatörlerini tanımlıyoruz, bu
sayede fırıldak $\hat{\xi} \in se(3)$ ile fırıldak kordinatları $\xi \in \mathbb{R}^6$ 
arasında gidip gelebilecektik.</p>
<p>$$ \hat{\xi} 
\equiv
\left[\begin{array}{c}
v \\ w
\end{array}\right]^{\land} 
=
\left[\begin{array}{cc}
\hat{w} &amp; v \\ 0 &amp; 0
\end{array}\right]  \in \mathbb{R}^{4 \times 4}
 $$</p>
<p>Hesaplanacak 6 derece serbestlik üstteki $v,w$ vektörlerinin
içeriklerinden oluşuyor. $\land$ uygulanan fırıldak vektörü, onun sonucu
fırıldak matrisi. </p>
<p>$$ 
\left[\begin{array}{cc}
\hat{w} &amp; v \\ 0 &amp; 0
\end{array}\right]^{\lor} = 
\left[\begin{array}{c}
v \\ w
\end{array}\right] \in \mathbb{R}^6
 $$</p>
<p>Diferansiyel denklem sistemi</p>
<p>$$ \left\{ \begin{array}{ll}
\dot{g}(t) = \hat{\xi}g(t), \quad \hat{\xi} = \textrm{ bir sabit } \\
g(0) = I
\end{array} \right. $$</p>
<p>Bu sistemin çözümü</p>
<p>$$ 
g(t) = e^{\hat{\xi} t} = \sum_{n=0}^{\infty} \frac{(\hat{\xi} t)^n}{n!}
 $$</p>
<p>Ve daha önce kendimize sorduğumuz aynı soruya tekrar geldik, acaba
$\hat{\xi}$'nin katlarını kodlama sırasında hesaplamamız gerekecek mi?
Cevap yine hayır; aynen Rodriguez formülüyle daha temiz bir şekilde hesap
yapabildiğimiz gibi bu fırıldak durumunda da benzer bir temiz hesap var,</p>
<p>$$ e^{\hat{\xi}} = 
\left[\begin{array}{rrr}
e^{\hat{w}} &amp; \frac{(I-e^{\hat{w}}) \hat{w}v + ww^Tv}{|w|} \\
0 &amp; 1
\end{array}\right]
\qquad (1)
$$</p>
<p>Eğer $w = 0$ olsaydı $e^{\hat{\xi}}=\left[\begin{array}{rrr} I &amp; v\\0 &amp; 1\end{array}\right]$ 
elde ederdik, üstteki formülün $w \ne 0$ için tamamen hesaplanması
gerekirdi.  Formül içindeki $e^{\hat{w}}$ Rodriguez formülüyle hesaplanabilir.</p>
<p>Yani tekrar Lie grubundan Lie cebirine geçişi yapmış olduk. </p>
<p>$$ \exp: se(3) \to SE(3); \qquad \hat{\xi} \to e^{\hat{\xi}} $$</p>
<p>Peki geriye gidiş mümkün mü? Bu noktada artık sürpriz olmayacak herhalde,
geriye gidiş yine logaritma ile mümkün. Matematiksel olarak ifade edelim, </p>
<p>Teori </p>
<p>Her $g \in SE(3)$ için bir fırıldak kordinatı $\hat{\xi}=(v,w) \in
\mathbb{R}^6$ vardır, ki $g = \exp(\hat{\xi})$. </p>
<p>İspat</p>
<p>Verilen herhangi bir $R$ için $e^{\hat{w}} = R$ olduğunu biliyoruz. Bu bize
(1)'deki matrisin sol üst köşesini sağlıyor. Geriye tek kalan matrisin sağ
üst köşesindeki ifadeyi ispatlamak. Bu ifadeyi, </p>
<p>$$ \frac{(I-e^{\hat{w}}) \hat{w}v + ww^Tv}{|w|} $$</p>
<p>$v$ için çözersek, daha doğrusu çözülebileceğini gösterirsek, ispat
tamamlanmış olur. </p>
<p>Üzerinden tekrar geçmek gerekirse, hareket eden bir manzarayı (daha doğrusu
bizim / kameramızın hareketi yüzünden değişmekte olan arka planı)
modellemek için katı gövde transformasyonu kullanıyoruz, ki böylece dünya
kordinatlarındaki objeyi kamera kordinatlarına çeviriyoruz. Bu çevirme
işlemi rotasyon ve yer değiştirmeyi içeriyor, ki bu hesapları, her $t$ anı
için bir $4 \times 4$ matrisi</p>
<p>$$ g(t) = 
\left[\begin{array}{rrr}
R(t) &amp; T(t) \\ 0 &amp; 1
\end{array}\right] \in SE(3)
 $$</p>
<p>ile yapabiliyoruz. $t=0$ anında kamera çerçevesi / ekseni / görüntüsü
(frame) ile dünya görüntü birbirine eşit, yani $g(0) = I$. Dünyadaki
herhangi bir $X_0$ noktası için $t$ anında kamera görüntü hali ,</p>
<p>$$ X(t) = R(t)X_0 + T(t) $$</p>
<p>3D tekrar oluşturma işlemlerinde üç boyutlu dünyayı bir görüntüye göre
yaratmak gerekiyor; bu görüntünün seçiminde serbestsiz, istediğimiz
görüntüyü seçebiliriz, fakat gerçek dünya uygulamalarında bu görüntü
genellikle ilk kamera pozisyonu olarak seçilir. Kamera hareket eder, o
hareket olurken ve biz hesaplarımızı yaparken dünyayı hep sanki ilk
kameradan bakıyormuş gibi oluşturmaya çalışırız, kordinatlar sürekli bu ilk
kordinat sistemine tercüme ederiz. </p>
<p>Üstteki formül homojen kordinatlarda</p>
<p>$$ X(t) = g(t) X_0 $$</p>
<p>Not: Hem normal hem homojen kordinatlarda aynı $X_0$'in kullanılmış olması
kafa karıştırabilir, bunu notasyonu temiz tutmak için bilerek yaptım, eğer
homojen durum için $X_0$ vektörüne '1' sayısını yeni bir öğe olarak eklemek
gerekir, fakat bu "yeni" vektör için yeni bir notasyon ekleseydim
notasyon enflasyonu olacaktı. En temizi aynı $X_0$'i kullanmak, ama
aklınızda olsun, eğer homojenlikten bahsediyorsak, $X_0$'in dört ögesi var,
ve sonuncu öğe 1. </p>
<p>Hareketleri Bitiştirmek </p>
<p>Diyelim ki kameranın iki ayrı hareketi sonrası $t_1,t_2$ anlarında ardı
ardına iki görüntüye sırasıyla eriştik. $t_1$ anındaki baktığımız
noktaların $t_2$ anına transforme edilmesi için $g(t_2,t_1)$
kullanılacaktır, ve </p>
<p>$$ X(t_2) = g(t_2,t_1)X(t_1) $$</p>
<p>Tabii $g$'nin yapısı öyle olmalıdır ki $t_0$'dan direk $t_2$'deki hale
gitmek ile önce $t_1$ sonra $t_2$ durumuna gitmek arasında fark olmamalı,
yani</p>
<p>$$ X(t_2) = g(t_3,t_2)X_2 = g(t_3,t_2)g(t_2,t_1)X(t_1) = g(t_3,t_1)X(t_1) $$</p>
<p>ki üstteki ifade tüm noktalar için doğru olmalı, yani,</p>
<p>$$ g(t_3,t_1) = g(t_3,t_2)g(t_2,t_1) $$</p>
<p>Bu geçiş mantığını takip edersek, şunu da söyleyebiliriz; $t_1$
görüntüsünün kordinatlarını $t_2$'ye, oradan tekrar geriye gidersek, şu
eşitliğin ortaya çıktığını görürüz,</p>
<p>$$ X(t_1) g(t_1,t_2)X(t_2) = g(t_1,t_2) g(t_2,t_1) X(t_1)$$</p>
<p>Bu eşitliğin tüm $X(t_1)$ noktaları için doğru olması gerektiği için, </p>
<p>$$ g(t_1,t_2)g(t_2,t_1) = I 
\quad \Leftrightarrow \quad g^{-1}(t_2,t_1) = g(t_1,t_2)
$$</p>
<p>Hız</p>
<p>Eğer $t$ anındaki transformasyonun değişimini, bir hızı, yani
$\dot{X}(t)$'i tanımlamak isteseydim, $X(t) = g(t)X_0$ olduğunu
hatırlayarak ve bu ifadenin türevini alarak,</p>
<p>$$ \dot{X}(t) = \dot{g}(t)X_0 $$</p>
<p>Ayrıca</p>
<p>$$ X(t) = g(t)X_0 \iff X_o = g^{-1}(t)X(t) $$</p>
<p>olduğuna göre, üstteki $X_o$'i iki üstteki formüle koyabiliriz,</p>
<p>$$ \dot{X}(t) = \dot{g}(t)g^{-1}(t)X(t) $$</p>
<p>Üstteki form tanıdık gelebilir, fırıldak tanımına yaklaştık. Fırıldak
kordinatları üzerinden,</p>
<p>$$ \hat{V}(t) \equiv \dot{g}g^{-1}(t) = 
\left[\begin{array}{rrr}
\hat{w}(t) &amp; v(t) \\ 0 &amp; 0
\end{array}\right] \in se(3)
$$</p>
<p>alttaki ifadeyi elde ederiz, </p>
<p>$$ \dot{X}(t) = \hat{V}(t)X(t) $$</p>
<p>Basit 3D kordinat sisteminde</p>
<p>$$ \dot{X}(t) = \hat{w}(t)X(t) + v(t) $$</p>
<p>olurdu. Neyse, vardığımız sonuç şudur; $\hat{V}(t)$ bize dünya görüntüsünün
kamera çerçevesine göre izafi hızını vermiş oluyor.</p>
<p>Farklı Çerçevelerdeki Hız</p>
<p>Aynen noktaları transform edebildiğimiz gibi hızı da bir çerçeveden
diğerine taşıyabilmeliyiz. Diyelim ki iki kişi, A ve B değişik açılardan
bir görüntüye bakıyorlar, bu kişiler değişimi nasıl görürlerdi? 
Diyelim ki $g_{xy}: Y = g_{xy}X(t)$. Yeni görüntüdeki hız, </p>
<p>$$ 
\dot{Y}(t) = g_{xy}\dot{X}(t) = 
g_{xy}\hat{V}(t)X(t) = g_{xy}\hat{V}g_{xy}^{-1}Y(t)
$$</p>
<p>Yani birinci kameradaki olanın ikinci kamerada görülen izafi hızı alttaki
fırıldak ile hesaplanır, </p>
<p>$$ \hat{V_y} = g_{xy} \hat{V} g_{xy}^{-1} Y(t) = ad_{g_{xy}}(\hat{V})$$</p>
<p>$ad$ ifadesi katımlı (adjoint) kelimesinden geliyor, </p>
<p>$$ ad_g: se(3) \to se(3); \qquad \hat{\xi} \to g \hat{\xi}g^{-1} $$</p>
<p>se(3) üzerinde bir katımlı eşlemedir. Bu eşleme bir Lie cebir öğesini alır,
ona soldan ve sağdan bir katı gövde transformasyonu ve onun tersini
uygular, ve böylece yeni bir fırıldak elde etmiş oluruz. </p>
<p>Bu noktaya kadar pek çok farklı formülden bahsettik, özetlemek açısından
alttaki tablo faydalı olabilir, </p>
<p>$$ 
\begin{array}{|p{4.0cm}|p{4.0cm}|p{4.0cm}|}
\hline
   &amp; \textrm{Rotasyon SO(3)} &amp; \textrm{Katı gövde SE(3)} \\
\hline
  \textrm{Matris temsili} &amp;  R $\in$ GL(3): $R^TR=I$, $\det(R)=1$ &amp; 
  $g = \left[\begin{array}{rr} R &amp; T \\ 0 &amp; 1 \end{array}\right]$ \\
\hline
 \textrm{3-D kordinatlar} &amp; $X=RX_0$ &amp; $X = RX_0 + T$ \\
\hline
 Tersi &amp; $R^{-1}=R^T$ &amp; 
 $g^{-1} = \left[\begin{array}{rr} R^T &amp; -R^T \\ 0 &amp; 1 \end{array}\right]$\\
\hline
 \textrm{Üstel temsil} &amp; $R = \exp(\hat{w})$ &amp; $g=\exp(\hat{\xi})$ \\
\hline
 Hız &amp; $\dot{X}=\hat{w}X$ &amp; $\dot{X} = \hat{w}X + v$ \\
\hline
 \textrm{Katımlı eşleme} &amp; 
 $\hat{w} \to R \hat{w} R^T$ &amp; 
 $\hat{\xi} \to g \hat{\xi}g^{-1}$\\
\hline
\end{array}
$$</p>
<p>[Euler açıları atlandı]</p>
          <br/><a href="../index.html">Yukarı</a>
        </section>          
      </div>
    </body>
</html>
