<p><a href="..">Yukarı</a></p>
<h1>Egri Uydurma, Aradegerleme (Interpolation) - 1</h1>
<!DOCTYPE html>
<html>
  <head>
    <title>Egri Uydurma, Aradegerleme (Interpolation) - 1
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [["$","$"]]}
      });
    MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
        cancel: ["Extension","cancel"],
        bcancel: ["Extension","cancel"],
        xcancel: ["Extension","cancel"],
        cancelto: ["Extension","cancel"]
      });
    });
    </script>
<script type="text/javascript"
   src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full">
</script>
</head>

<p>Diyelim ki elimizde alttaki veri var.</p>
<pre><code class="python">x = np.arange(1,7)
y = np.array([10, 5.49, 0.89, -0.14, -1.07, 0.84])
plt.plot(x,y,'.')
plt.ylim(-2,12)
plt.xlim(0,7)
plt.savefig('compscieng_1_21_01.png')
</code></pre>

<p><img alt="" src="compscieng_1_21_01.png" /></p>
<p>Bu veriye istediğimiz kadar bükümü olan bir eğri nasıl uydururuz?
"İstediğimiz kadar bükümü olan eğri" polinom çağrısı yapabilir.. Mesela
bir polinom eğri,</p>
<p>$$ y = c_1 x^3 + c_2x^2 + c_3x + c_4 $$</p>
<p>olarak gösterilebilir. Mesela bazı gelişigüzel sabit değerler
$c_1=1,c_2-20,c_3=1,c_4=-4$ sabitlerinden alttaki görüntü çıkar,</p>
<pre><code class="python">x2 = np.linspace(0,10,1000)
c_1 = 2.; c_2 = -20.; c_3 = 1.; c_4 = -4
y2 = c_1*x**3 + c_2*x**2 + c_3*x + c_4
plt.plot(x2,y2)
plt.savefig('compscieng_1_21_02.png')
</code></pre>

<p><img alt="" src="compscieng_1_21_02.png" /></p>
<p>Eğri iki kere bükülebiliyor çünkü formül küpsel. Karesel olsa sadece bir
kere bükülebilirdi. Peki karesel, ya da küpsel ya da daha üst derecedeki
polinomları veriye nasıl uydururuz? Acaba lineer regresyonu bir şekilde
kullanabilir miyiz? Ama lineer regresyon, adı üstünde, "lineer", yani
doğrusal. Doğrusal olmayan bir şeyi nasıl uyduracağız? Şimdi lineer
regresyonun neyi uydurduğunu hatırlayalım,</p>
<p>$$ y = c_1 z_1 + c_2 z_2 + .. + c_nz_n $$</p>
<p>Bu çok boyutlu, her biri birer vektör olan $z_1,..,z_n$ ile tek vektör $y$
ilişkisini girdi olarak alıyor (üstteki formülü ya vektörsel işlem olarak
ya da $y,z_i$ öğelerinin teker teker formüle geçildiği şekilde
görebiliriz). </p>
<p>Acaba şöyle bir numara yapamaz mıyız? Eğer elimizdeki tek boyutlu veriyi
alıp, onun tamamının bir kere karesini, bir kere küpünü, vs. ayrı ayrı alıp
her sonucu sanki ayrı bir boyutlarmış gibi lineer regresyona verirsek,
otomatik olarak eğri uydurmuş olmaz mıyız ?! Yani üstteki örnek için
$z_1=x^3,z_2=x^2,z_3=x,z_4=1$ olacak, matris formunda,</p>
<p>$$ A = 
\left[\begin{array}{rrrr}
x_1^3 &amp; x_1^2 &amp; x_1 &amp; 1 \\
x_2^3 &amp; x_2^2 &amp; x_2 &amp; 1 \\
\vdots &amp; \vdots &amp; \vdots &amp; \vdots \\
x_m^3 &amp; x_m^2 &amp; x_m &amp; 1 
\end{array}\right]
 $$</p>
<p>ki $x_i$, $x$ vektörünün tek bir öğesini temsil ediyor. Gerisi bildiğimiz En
Az Kareler yöntemi ile $Ax=b$'yi, ya da üstteki notasyona göre $Ac=y$
çözmek, $(A^TA)^{-1}A^Tc$ ile (tabii QR kullanmak daha iyi ama bu basit
örnek için önemli değil). Baştaki örneği çözelim mesela</p>
<pre><code class="python">import scipy.linalg as lin
A = np.array([x**3, x**2, x, np.ones(len(x))]).T
res = np.dot(np.dot(lin.pinv(np.dot(A.T,A)),A.T),y)
print A, '\n\n', res
</code></pre>

<pre><code>[[   1.    1.    1.    1.]
 [   8.    4.    2.    1.]
 [  27.    9.    3.    1.]
 [  64.   16.    4.    1.]
 [ 125.   25.    5.    1.]
 [ 216.   36.    6.    1.]] 

[  0.03925926   0.42313492  -6.5032672   16.12666667]
</code></pre>

<p>Kütüphane çağrısı <code>polyfit</code> kullanırsak,</p>
<pre><code class="python">print np.polyfit(x,y,3)
</code></pre>

<pre><code>[  0.03925926   0.42313492  -6.5032672   16.12666667]
</code></pre>

<p>Tıpatıp aynı sonuç çıktı, çünkü büyük bir ihtimalle <code>polyfit</code> aynı
tekniği kullanıyor! </p>
<pre><code class="python">plt.plot(x,y,'.')
plt.ylim(-2,12)
plt.xlim(0,7)
yy = res[0]*x**3 + res[1]*x**2 + res[2]*x + res[3]
plt.plot(x,y,'.')
plt.hold(True)
plt.plot(x,yy)
plt.savefig('compscieng_1_21_03.png')
</code></pre>

<p><img alt="" src="compscieng_1_21_03.png" /></p>
<p>Uyum fena değil! Not: eğri kesikli çıktı çünkü çok az sayıda veri var. </p>